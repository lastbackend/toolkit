syntax = "proto3";

package toolkit;

option go_package = "github.com/lastbackend/toolkit/protoc-gen-toolkit/toolkit/options;annotations";

import "google/protobuf/descriptor.proto";

message Plugin {
  string plugin = 1;
  string prefix = 2;
}

message Client {
  string service = 1;
  string package = 2;
}

extend google.protobuf.FileOptions {
  repeated Plugin plugins = 50001;
  repeated Client clients = 50002;
  DockerfileSpec dockerfile_spec = 50003;
  TestSpec tests_spec = 50004;
}

message DockerfileSpec {
  repeated int32 expose = 1;
  repeated string commands = 2;
  bool rewrite_if_exists = 3;
}

message TestSpec {
  MockeryTestsSpec mockery = 1;
}

message MockeryTestsSpec {
  string package = 1;
}

extend google.protobuf.MethodOptions {
  Proxy proxy = 60001;
}

message Proxy {
  oneof proxy {
    HttpProxy http = 1;
    WsProxy ws = 2;
  }
}

message HttpProxy {
  string service = 1;
  string method = 2;
}

message WsProxy {
  string path = 1;
}
